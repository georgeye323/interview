### 1、AMQP模型的几大组件？

* 交换器(Exchange)：消息代理服务器中用于把消息路由到队列的组件
* 队列(Queue)：用来存储消息的数据结构，位于硬盘或内存中
* 绑定(Binding)：一套规则，告知交换器消息应该将消息投递给哪个队列。

### 2、说说生产者Producer和消费者Consumer?

​		**生产者**

 * 消息生产者，就是投递消息的一方。

 * 消息一般包含两个部分：消息体(payload) 和 标签(Label)

   **消费者**

* 消费消息，也就是接受消息的一方。

* 消费者连接到RabbitMQ服务器，并订阅到队列上。消费消息时只消费消息体，丢弃标签。

### 3、消息队列的基本作用？

	* **解耦**（服务解耦）
	* **异步**（异步处理）
	* **削峰** （流量控制）

###  4、如何保证消息队列的高可用？

### 5、说说Broker服务节点、Queue队列、Exchange交换器？

	* Broker可以看作RabbitMQ的服务节点。一般情况下，一个Broker可以看作一个RabbitMQ服务器
	* Queue：RabbitMQ的内部对象，用于存储消息。多个消费者可以订阅同一队列，这时队列中的消息会被平摊（轮询）给多个消费者处理。
	* Exchange：生产者将消息发送到交换器，由交换器将消息路由到一个或多个队列中。当路由不到时，或返回给生产者或直接丢弃。

### 6、如何保证消息的可靠性？

  * 生产者
    		* 开启RabbitMQ事务
    		* 开启confirm模式
* MQ 
  * 开启RabbitMQ持久化
* 消费者
  * 关闭RabbitMQ自动ACK

### 7、如何保证消息不被重复消费？

​	要保证消息不被重复消费，其实就是要保证消费时的幂等性。

	* 写数据时，先根据主键查一下这条数据是否存在，如果存在则update
	* 数据库的唯一键约束可以保证不会重复插入多条，因为重复插入多条只会报错，不会导致数据库中出现脏数据
	* 如果是写Redis，就没有问题，因为set操作时天然的幂等性

### 8、RabbitMQ有哪些重要的组件？

	1.	ConnectionFactory（连接管理器）：应用程序与RabbitMQ之间建立连接的管理器，程序代码中使用。
 	2.	Channel（信道）：消息推送使用的通道
 	3.	Exchange（交换器）：用于接收、分配消息
 	4.	Queue（队列）：用于存储生产者的消息
 	5.	RoutingKey（路由键）：用于把生产者的数据分配到交换器上
 	6.	BindingKey（绑定键）：用于把交换器的消息绑定到队列上

### 9、RabbitMQ的广播类型？

​		RabbitMQ有三种广播模式：fanout、direct、topic

	* fanout：所有bind到此的exchange的queue都可以接收消息；很像子网广播，每台子网的主机都获得了一份复制的消息。fanout交换机转发消息是最快的
	* direct：通过routingKey和exchange中的bindingKey决定了那个唯一的queue可以接收消息
	* topic：所有符合routingKey所bind的queue可以接收消息

  







